# elmfire-datagen
For chpa-214, a repository that contains information and scripts for generating a dataset for wildfire modeling.

## Overview
This repository serves as a reference for generating comprehensive datasets using ELMFIRE (Eulerian Level Set Model of Fire spread) to train deep learning models for wildfire behavior prediction. The approach is inspired by two key research efforts: the Google Research/USFS collaboration on high-resolution 1D fire modeling and established standards in wildfire machine learning research.

This repository contains scripts both for running ELMFIRE simulations and for postprocessing them
for the purpose of applying deep learning models to predict certain variables like fireline intensity,
flame length, and others.

Generally, these datasets were kept at 500 simulations with timesteps of 15
minutes both to keep them small enough to assess the changes wrought by
architectural differences in initial model testing and to keep them refined enough
temporally to have sufficient information.

## Instructions
This repository is intended to make ELMFIRE simulation and processing, for the
purposes of deep learning, easy. Within each dataset directory, you will find
bash scripts that run ELMFIRE, run a set of simulations of ELMFIRE, and run
a set of simulations of ELMFIRE with postprocessing (0N-full-process).

**config.json:** The input ranges, variables you'd like to be tracked by ELMFIRE,
and variables you'd like to be postprocessed for input into the deep learning
model are all specified in the config file in the configuration directory of each
dataset directory.

In order to generate a dataset and postprocess, you can run 0N-full-process.sh
which can be called like so:

    0N-full-process.sh <NUMBER-OF-RUNS> <START-NUM>

Where the number of simulations you want to run for, and the simulation number
that you want to start at (in case you'd like to continue from a certain number)
are both specified in that order.

**NOTE:** you must specify the number of runs, but the start number does not have to
be specified.

## Datasets
01-dataset-sub15
- A dataset generated by keeping all input variables constant except for the
  fuel model which was varied between the first 15 available fuel models
- Will probably not be used for model training
- The input variables were varied between simulations according to established
  realistic ranges
**01-singlefuel-realistic**
- A dataset generated by keeping all input variables constant including fuel
- The fuel used has the code 101 and is GR1, a grassy fuel model
- The input variables were varied between simulations according to established
  realistic ranges
- 500 simulations is the number used
**02-multifuel-realistic**
- Same as 01-singlefuel-realistic, but this time the fuel was varied between
  the simulations
02-multifuel-unrealistic
- A dataset generated by varying all input variables between simulations within
  wide, but sometimes unrealistic ranges.


## General Ranges:
X_IGN,x_ignition,[-960,960]
Y_IGN,y_ignition,[-960,960]
SLP,slope,[0,45]
ASP,aspect,[0,360]
WS,wind_speed,[0,30]
WD,wind_direction,[0,360]
M1,m1_moisture, see allowed scenarios
M10,m10_moisture, see allowed scenarios
M100,m100_moisture, see allowed scenarios
CC,canopy_cover = 0
CH,canopy_height = 0
CBH,canopy_base_height = 0
CBD,canopy_bulk_density = 0
MLH,live_herbaceous, see allowed scenarios
MLW,live_woody, see allowed scenarios
DEM,elevation = 0

- 01-constant-wind:
  - A directory containing the first tutorial copied over from ELMFIRE directly
- 01-dataset-realistic-over102
  - Fuel models:
    - 101-109, 121-124, 141-149, 161-165, 181-189, 201-204
  - LHC > 30%
  - LWC > 60%
  - Dead fuel moistures > 2% (maybe, tend not to go below 2-3% but they can)
  - Ignore canopy for now (set all variables to 0 at the moment, and address later on)
  - Live fuel moisture content scenarios L1-L4 [MLH,MLW]:
    - [30,60],[60,90],[90,120],[120,150]
  - Dead moisture content scenarios D1-D4 [M1,M10,M100]:
    - [3,4,5],[6,7,8],[9,10,11],[12,13,14]

(IGNORE) Data Syncing between repositories:
- rsync -av --update ~/Desktop/elmfire/docker_shared_folder/ ~/Desktop/irp-wildfire-dataset-gen/docker_shared_folder/
